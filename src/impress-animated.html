<polymer-element name="impress-animated" attributes="animations ontransition"  constructor="ImpressAnimated">
	<template>
		<content></content>
	</template>
	<script type="text/javascript">
		(function() {
			// Fallback procedure to animate functions in the 
			// event of unsupported browsers/polyfills
			var animateFallback_ = function(animationName) {
				if ((this.style.animationName != animationName) || 
						(this.style.webkitAnimationName != animationName)) {
							this.style.webkitAnimation = this.style.animation = animationName + " 1s both";
				}
			};

			Polymer('impress-animated', {
				// bound to the <style> tags in subclasses
				animationName: "",

				// define entrance and exit animations
				// Defaults: "fadeIn" and "fadeOut"
				animations: {entrance: "fadeIn", exit: "fadeOut"},

				// Animates the object into the deck and calls the 
				// ontransition callback
				// TODO: Validate animations
				animateIn: function() {
					this.animateEl(this.animations.entrance);	

					// Rewrite without Function constructor
					if (this.ontransition) {
						new Function(this.ontransition)();
					}			
				},

				// Animate the object out
				// TODO: Validate animations
				animateOut: function() {
					this.animateEl(this.animations.exit);
				},

				// Animates an element
				// Can be used as utility method through prototype
				// e.g. ImpressAnimated.prototype.animateEl.call($('#someEl'), "fadeIn")
				animateEl: function(animationName) {
					if (!!window.ShadowDOMPolyfill || !(this instanceof ImpressAnimated)) {
						animateFallback_.call(this, animationName);
					} else {
						this.animationName = animationName;
					}
				}, 

				removeAnimations: function() {
					this.animateEl('');
				}
			});
		})();
	</script>
</polymer-element>